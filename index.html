<html>
    
<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>

<body>
    <form>
        <div class="form-group">
            <label for="voice">Select a voice:</label>
            <select id="voice" name="voiceId" class="form-control">
                <option value="">Choose a voice...</option>
                <option value="AmazonPolly">Amazon Polly: Joanna</option>
            </select>
        </div>
        <div class="form-group">
            <label for="text">Text to read:</label><button type="button" id="btnRandom" class="btn btn-default">Random Quote</button>
            <textarea id="text" maxlength="1000" minlength="1" name="text"
                    placeholder="Type some text here... (1000 characters max.)" class="form-control"></textarea>
        </div>
        <button type="button" id="btnRead" class="btn btn-default btn-block">Read</button>
    </form>
    
<script>
    $('#btnRandom').click(function() {
        $.getJSON("http://quotes.stormconsultancy.co.uk/random.json", function(quote) {
            $('#text').val(quote.quote);
        });
    });

    $('#btnRead').click(function() {
        var vendor = $('#voice').val();
        if (vendor === ''){
            alert('Please select a voice');
            return;
        }
        var text = $('#text').val();
        if (text === ''){
            alert('Please enter some text');
            return;
        }
        var fileName = 'synthezisedText' + Date.now();
  
        $.ajax({
            url: "/synthesize",
            type: "get", //send it through get method
            data: { 
                vendor: vendor, 
                fileName: fileName,
                text: text
            },
            success: function(response) {
                console.log('Ready to play!');
                new Audio(fileName + '.mp3').play();
            },
            error: function(xhr) {
                console.log(xhr);
            }
        });
    });
</script>

</body>
</html>